# Pipeline Configuration

sentinel:
  bands:
    - B01  # Coastal/Aerosol (443 nm)
    - B02  # Blue (490 nm)
    - B03  # Green (560 nm)
    - B04  # Red (665 nm)
    - B05  # Red Edge 1 (705 nm)
    - B06  # Red Edge 2 (740 nm)
    - B07  # Red Edge 3 (783 nm)
    - B08  # NIR (842 nm)
    - B8A  # NIR narrow (865 nm)
    - B11  # SWIR 1 (1610 nm)
    - B12  # SWIR 2 (2190 nm)
  
  resolution: 20  # meters
  
  indices:
    - NDVI  # (B08 - B04) / (B08 + B04)
    - NDWI  # (B03 - B08) / (B03 + B08)
  
  scl_clear_classes: [4, 5, 6]  # Vegetation, Not-vegetated, Water
  min_clear_observations: 3

features:
  statistics:
    - median
    - p10    # Percentile 10
    - p90    # Percentile 90
    - range  # p90 - p10
  
  temporal_aggregation: annual
  min_valid_pixels: 100

labels:
  erosion_pixels: 2
  classes:
    bosque: 1
    no_bosque: 0
    ignorar: -1

training:
  test_fraction: 0.15
  validation_fraction: 0.20
  random_seed: 42
  stratify: true
  
  class_weights:
    auto_balance: true
    custom_weights: null  # {0: 0.5, 1: 3.0}
  
  models:
    random_forest:
      enabled: true
      param_grid:
        numTrees: [200, 400, 600]
        maxDepth: [10, 14, 18]
        maxBins: [64, 128]
        featureSubsetStrategy: ["sqrt", "log2"]
    
    gradient_boosting:
      enabled: true
      param_grid:
        maxDepth: [6, 8, 10]
        maxBins: [64, 128]
        maxIter: [100, 200, 300]
        stepSize: [0.05, 0.1, 0.2]
  
  optimization:
    method: TrainValidationSplit  # or CrossValidator
    cv_folds: 5
    metric: areaUnderPR  # or areaUnderROC
    parallelism: 8

prediction:
  batch_size: 10000
  probability_threshold: 0.5
  output_format: parquet  # or csv, geotiff
