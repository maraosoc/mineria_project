---
title: "Detecci√≥n de Deforestaci√≥n con Machine Learning"
subtitle: "Infrraestructura en la nube para la de Clasificaci√≥n Bosque/No-Bosque usando imagenes satelitales"
author: "Manuela Ramos Ospina y Juan Manuel Orozco Yepes"
date: "12 de noviembre de 2025"
format:
  revealjs:
    theme: [default]
    slide-number: true
    toc: false
    incremental: false
    code-copy: true
    footer: "Proyecto Miner√≠a de Datos"
    embed-resources: true
    width: 1600
    height: 900
    margin: 0.15
    center: true
    transition: slide
    background-transition: fade
    css: custom.css
    scrollable: false
execute:
  echo: false
  warning: false
lang: es
---

## {background-color="#2C5F2D"}

::: {.columns}
::: {.column width="40%"}
![](raster.png){width=100%}
:::

::: {.column width="60%"}
::: {style="font-size: 2em; font-weight: 900; margin-bottom: 0.3em;"}
**Detecci√≥n de Deforestaci√≥n con Machine Learning**
:::

::: {style="font-size: 1.3em; margin-bottom: 0.5em;"}
Pipeline de Clasificaci√≥n Bosque/No-Bosque usando Sentinel-2 y AWS
:::

::: {style="font-size: 1.1em;"}
**Equipo de Miner√≠a de Datos**  
12 de noviembre de 2025
:::
:::
:::

---

## üåç Contexto y Problem√°tica {background-color="#2C5F2D"}

::: {style="font-size: 1.3em; font-weight: 700; margin-bottom: 0.5em;"}
**La Deforestaci√≥n en Colombia**
:::

::: {style="font-size: 1.05em; line-height: 1.5;"}
- üå≥ La **deforestaci√≥n** responde principalmente a la **expansi√≥n agr√≠cola** (legal e ilegal)
- ü™ì Actividades intensivas de **aprovechamiento forestal** comercial y dom√©stico
- üó∫Ô∏è Debido al car√°cter **altamente diverso** del pa√≠s, cada regi√≥n presenta condiciones biof√≠sicas diferentes
- üéØ El estudio a **escala subnacional** es clave para diagn√≥sticos precisos y acciones focalizadas
:::

---

## üõ∞Ô∏è Herramientas Tecnol√≥gicas {background-color="#1E4D2B"}

::: {style="font-size: 1.05em; line-height: 1.5;"}
- **Im√°genes satelitales** + **SIG**: insumos fundamentales para mapeo y an√°lisis espacial
- **Sentinel-2**: sensor cr√≠tico para delimitar √°reas forestales de forma reproducible
- **Machine Learning**: identificaci√≥n de coberturas, modelaci√≥n de distribuci√≥n de especies
- **AWS (S3, EC2, EMR)**: infraestructura cloud para procesamiento distribuido
:::

::: {.fragment}
::: {.callout-tip icon=true style="font-size: 0.95em; margin-top: 1em;"}
## Ventaja Competitiva
Pipeline **completamente reproducible** y **escalable**
:::
:::

---

## üéØ Pregunta de Investigaci√≥n {background-color="#234A23"}

::: {style="font-size: 1.4em; font-weight: 700; text-align: center; padding: 1.5em; background: rgba(255,255,255,0.1); border-radius: 15px; line-height: 1.4;"}
¬øC√≥mo identificar autom√°ticamente coberturas boscosas usando im√°genes satelitales multiespectrales, mediante arquitecturas de big data y aprendizaje autom√°tico?
:::

---

## üìä Objetivo General {background-color="#2C5F2D"}

::: {style="font-size: 1.25em; text-align: center; padding: 2em; background: rgba(255,255,255,0.1); border-radius: 15px; line-height: 1.5;"}
Desarrollar una infraestructura de big data para detectar bosque a partir de im√°genes satelitales, empleando procesamiento distribuido y aprendizaje autom√°tico
:::

---

## üéØ Objetivos Espec√≠ficos {background-color="#1E4D2B"}

::: {style="font-size: 1.1em; line-height: 1.6;"}
1. **Implementar un pipeline de ingesta eficiente** de datos satelitales multiespectrales en zonas rurales

2. **Generar un conjunto de grandes vol√∫menes de datos** limpios de artefactos con caracter√≠sticas relevantes

3. **Dise√±ar modelos de aprendizaje autom√°tico** capaces de detectar bosque / no-bosque

4. **Optimizar el entrenamiento y validaci√≥n** de los modelos para grandes vol√∫menes de datos
:::

---

## üì¶ Dataset y Caracter√≠sticas {background-color="#234A23"}

::: {.columns}
::: {.column width="60%"}
### üõ∞Ô∏è Fuente: Sentinel-2
::: {style="font-size: 1em;"}
- **Bandas**: B02-B08, B8A, B11, B12 (10 bandas)
- **√çndices**: Calculados NDVI, NDWI, NDMI
- **Resoluci√≥n**: 20 metros
:::
:::

::: {.column width="40%"}
### üìä Shapes de fincas
::: {style="font-size: 1em;"}
- **distribuidas** en todo el pa√≠s
- **Cantidad**: 20 fincas
:::
:::
:::

---

## üîÑ Pipeline Completo de Procesamiento {background-color="#2C5F2D"}

::: {style="font-size: 0.95em;"}
**Paso 0: Ingesta de Datos**
- Carga de shapefiles a S3 (per√≠metros y cobertura boscosa)
- Descarga de im√°genes Sentinel-2 hist√≥ricas (productos .SAFE)

**Paso 1: Procesamiento Sentinel-2** (`01_procesar_sentinel_clip.py`)
- Extracci√≥n de 10 bandas espectrales, remuestreo (10m), reproyecci√≥n (EPSG:4326), recorte al per√≠metro

**Paso 2: Tabulaci√≥n de Features** (`03_tabular_features.py`)
- Extracci√≥n pixel-a-pixel, composici√≥n temporal (mediana, p25, p75), conteo de observaciones

**Paso 3: Rasterizaci√≥n de Labels** (`04_rasterizar_labels.py`)
- Reproyecci√≥n de shapefiles, rasterizaci√≥n de bosque, erosi√≥n morfol√≥gica de bordes

**Paso 4: Uni√≥n Features + Labels** (`05_unir_features_labels.py`)
- Combina features espectrales con labels, filtrado de p√≠xeles v√°lidos

**Paso 5: Consolidaci√≥n Multi-Zona** (`process_all_zones_pipeline.py`)
- Descubrimiento autom√°tico, validaci√≥n, concatenaci√≥n, generaci√≥n de reporte
:::

---

## üìä Estad√≠sticas y Calidad del Dataset {background-color="#1E4D2B"}

::: {.columns}
::: {.column width="50%"}
### üìà Distribuci√≥n
::: {style="font-size: 1em;"}
- **Total**: 8,008 p√≠xeles
- **Bosque (1)**: 1,820 (22.7%)
- **No-Bosque (0)**: 6,188 (77.3%)
- **Features**: 15 variables espectrales
- **Formato**: Parquet (eficiente)
:::

### ‚úÖ Fortalezas
::: {style="font-size: 0.95em;"}
- Cantidad suficiente para ML
- Diversidad geogr√°fica (4 departamentos)
- Labels validados con shapefiles
- Erosi√≥n de bordes aplicada
:::
:::

::: {.column width="50%"}
### ‚ö†Ô∏è Consideraciones
::: {style="font-size: 1em;"}
- **Desbalance moderado** (3.4:1)
  - Requiere balanceo en entrenamiento
  - `class_weight='balanced'` implementado

- **Zona 79 problem√°tica** (749:1)
  - Casi sin bosque
  - Considerar exclusi√≥n

- **Variabilidad temporal limitada**
  - Composite anual
  - No series temporales completas
:::
:::
:::
:::


---

## ‚òÅÔ∏è Infraestructura AWS {background-color="#2C5F2D"}

![](mermaid.png){width=90% fig-align="center"}

---

## ü§ñ Entrenamiento del Modelo {background-color="#1E4D2B"}

::: {style="font-size: 1.05em;"}
**Algoritmo**: Random Forest Classifier

::: {.columns}
::: {.column width="50%"}
**Configuraci√≥n**
```python
RandomForestClassifier(
  n_estimators=100,
  max_depth=10,
  min_samples_split=10,
  min_samples_leaf=5,
  class_weight='balanced',
  random_state=42
)
```
:::

::: {.column width="50%"}
**Divisi√≥n de Datos**
- **Train**: 70% (5,608 muestras)
- **Validation**: 15% (1,198)
- **Test**: 15% (1,202)

**Distribuci√≥n de Clases**
- No-Bosque: 77.3%
- Bosque: 22.7%
:::
:::
:::

---

## üìä Resultados Principales {background-color="#234A23"}

::: {style="text-align: center;"}

### üéØ M√©tricas en Test Set

| M√©trica | Valor | Interpretaci√≥n |
|:--------|------:|:---------------|
| **Accuracy** | **90.35%** | Tasa de acierto general |
| **Precision** | 72.89% | 73 de cada 100 predicciones correctas |
| **Recall** | **91.58%** | Detecta 9 de cada 10 √°reas boscosas |
| **F1-Score** | 81.17% | Balance precision-recall |
| **ROC AUC** | **96.16%** | Excelente discriminaci√≥n |
| **PR AUC** | **85.42%** | Muy bueno para clases desbalanceadas |

:::

---

## üéØ Matriz de Confusi√≥n {background-color="#2C5F2D"}

::: {.columns}
::: {.column width="60%"}
::: {style="font-size: 1.2em;"}

|                | Pred: No-Bosque | Pred: Bosque |
|---------------:|----------------:|-------------:|
| **Real: No-Bosque** | **836** ‚úÖ | 93 ‚ùå |
| **Real: Bosque** | 23 ‚ùå | **250** ‚úÖ |

:::

### Interpretaci√≥n
::: {style="font-size: 1em;"}
- **TN**: 836 (90.0%) - Correctos no-bosque
- **FP**: 93 (10.0%) - Falsos positivos
- **FN**: 23 (8.4%) - Bosque no detectado
- **TP**: 250 (91.6%) - Correctos bosque
:::
:::

::: {.column width="40%"}
::: {.callout-important icon=true style="font-size: 1em;"}
## Tasa de Error
**Falsos Negativos**: 8.42%

El modelo pierde algunas √°reas de bosque, pero la tasa es aceptable.
:::
:::
:::

---

## üìä An√°lisis de Features {background-color="#1E4D2B"}

::: {.columns}
::: {.column width="50%"}
### üîù Top 5 Features
::: {style="font-size: 0.95em;"}

| Rank | Feature | Importancia |
|:----:|:--------|:------------|
| ü•á | `B03_med` (Verde) | **18.90%** |
| ü•à | `NDVI_range` | **11.67%** |
| ü•â | `B11_med` (SWIR) | **9.99%** |
| 4 | `B05_med` (Red Edge) | 9.31% |
| 5 | `n_obs` | 8.94% |

:::

**Total bandas espectrales**: 61.86%
:::

::: {.column width="50%"}
### üìà Insights
::: {style="font-size: 0.95em;"}
**Bandas Espectrales Clave**
- Verde (B03): Reflectancia vegetaci√≥n
- SWIR (B11, B12): Contenido humedad
- Red Edge (B05): Estado vegetaci√≥n

**Variabilidad Temporal**
- NDVI_range: Cambios estacionales
- n_obs: Calidad temporal
- Percentiles: Extremos condiciones

La **din√°mica temporal** es crucial para discriminaci√≥n
:::
:::
:::

---

## ‚úÖ Fortalezas y ‚ö†Ô∏è √Åreas de Mejora {background-color="#234A23"}

::: {.columns}
::: {.column width="50%"}
### ‚úÖ Fortalezas
::: {style="font-size: 1em;"}
1. **Alto Recall (91.58%)**
   - Detecta mayor√≠a de bosques
   - Bajo riesgo de p√©rdida

2. **Excelente ROC AUC (96.16%)**
   - Muy buena discriminaci√≥n

3. **Features Interpretables**
   - Bandas espectrales conocidas
   - NDVI validado cient√≠ficamente
:::
:::

::: {.column width="50%"}
### ‚ö†Ô∏è √Åreas de Mejora
::: {style="font-size: 1em;"}
**1. Precision (72.89%)**
- ~27% falsos positivos
- Soluciones: m√°s datos, ajuste umbrales, features adicionales

**2. Desbalance de Clases**
- Estrategia: `class_weight='balanced'`
- Alternativas: SMOTE, undersampling

**3. Validaci√≥n Geogr√°fica**
- Split por zonas (no aleatorio)
- Evaluar generalizaci√≥n espacial
:::
:::
:::

---

## üöÄ Recomendaciones T√©cnicas {background-color="#2C5F2D"}

::: {style="font-size: 1.05em; line-height: 1.5;"}

1. **Re-entrenamiento Peri√≥dico**
   - Actualizar modelo cada 3-6 meses con nuevos datos de zonas

2. **Monitoreo de Performance**
   - Tracking continuo en producci√≥n para detectar drift en datos

3. **Deployment en Pipeline**
   - Integrar en sistema automatizado con API para predicciones en tiempo real

4. **Validaci√≥n en Campo**
   - Verificar predicciones in-situ en zonas no incluidas en entrenamiento

5. **Features Adicionales**
   - √çndices: EVI, SAVI, NDMI
   - Texturas: GLCM
   - Variables clim√°ticas

6. **Ensemble de Modelos**
   - Combinar RF + GBT con voting classifier
:::

---

## üéì Conclusiones {background-color="#1E4D2B"}

::: {style="font-size: 1.15em; line-height: 1.6;"}

‚úÖ **Pipeline completo y funcional** implementado exitosamente

‚úÖ **Modelo con 90.35% de accuracy** en detecci√≥n de cobertura forestal

‚úÖ **Infraestructura escalable** en AWS (S3, EC2, EMR)

‚úÖ **Flujo reproducible** con scripts documentados

‚úÖ **Features interpretables** basadas en evidencia cient√≠fica

‚úÖ **Dataset de calidad** con 8,008 muestras validadas

:::

---

## üåü Impacto y Aplicaciones {background-color="#234A23"}

::: {.columns}
::: {.column width="50%"}
### üåç Aplicaciones Ambientales
::: {style="font-size: 1.05em;"}
- Monitoreo de deforestaci√≥n
- Conservaci√≥n de biodiversidad
- Cumplimiento normativo
- Reportes de carbono
- Gesti√≥n de riesgos ambientales
:::
:::

::: {.column width="50%"}
### üíº Valor Comercial
::: {style="font-size: 1.05em;"}
- Due diligence ambiental
- Certificaci√≥n forestal
- Evaluaci√≥n de riesgos
- Planificaci√≥n territorial
- Toma de decisiones informada
:::
:::
:::

---

## üìö Referencias y Documentaci√≥n {background-color="#2C5F2D"}

::: {style="font-size: 1.1em;"}

### üìñ Documentaci√≥n del Proyecto
- `README.md` - Gu√≠a general y resultados principales
- `DATA_PREP.md` - Preparaci√≥n detallada de datos
- `RESULTADOS_ENTRENAMIENTO.md` - An√°lisis completo de m√©tricas
- `EMR_TRAINING.md` - Entrenamiento distribuido en Spark
- `config/*.yaml` - Configuraci√≥n de par√°metros

### üîó Recursos Externos
- [Sentinel-2 Documentation](https://sentinel.esa.int/web/sentinel/missions/sentinel-2)
- [AWS EMR Spark](https://aws.amazon.com/emr/)
- [Scikit-learn Random Forest](https://scikit-learn.org/stable/)

### üóÇÔ∏è Repositorio
- GitHub: `github.com/maraosoc/mineria_project`

:::

---

## üôè ¬°Gracias! {background-color="#1E4D2B"}

::: {style="text-align: center; font-size: 1.8em; margin-top: 2em;"}

:::

::: {style="text-align: center; font-size: 1.2em; margin-top: 2em;"}

:::
