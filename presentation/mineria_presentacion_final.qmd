---
title: "DetecciÃ³n de DeforestaciÃ³n con Machine Learning"
subtitle: "Infrraestructura en la nube para la de ClasificaciÃ³n Bosque/No-Bosque usando imagenes satelitales"
author: "Manuela Ramos Ospina y Juan Manuel Orozco Yepes"
date: "12 de noviembre de 2025"
format:
  revealjs:
    theme: [default]
    slide-number: true
    toc: false
    incremental: false
    code-copy: true
    footer: "Proyecto MinerÃ­a de Datos"
    embed-resources: true
    width: 1600
    height: 900
    margin: 0.15
    center: true
    transition: slide
    background-transition: fade
    css: custom.css
    scrollable: false
execute:
  echo: false
  warning: false
lang: es
---

## {background-color="#2C5F2D"}

::: {.columns}
::: {.column width="40%"}
![](raster.png){width=100%}
:::

::: {.column width="60%"}
::: {style="font-size: 2em; font-weight: 900; margin-bottom: 0.3em;"}
**DetecciÃ³n de DeforestaciÃ³n con Machine Learning**
:::

::: {style="font-size: 1.3em; margin-bottom: 0.5em;"}
Pipeline de ClasificaciÃ³n Bosque/No-Bosque usando Sentinel-2 y AWS
:::

::: {style="font-size: 1.1em;"}
**Equipo de MinerÃ­a de Datos**  
12 de noviembre de 2025
:::
:::
:::

---

## ğŸŒ Contexto y ProblemÃ¡tica {background-color="#2C5F2D"}

::: {style="font-size: 1.3em; font-weight: 700; margin-bottom: 0.5em;"}
**La DeforestaciÃ³n en Colombia**
:::

::: {style="font-size: 1.05em; line-height: 1.5;"}
- ğŸŒ³ La **deforestaciÃ³n** responde principalmente a la **expansiÃ³n agrÃ­cola** (legal e ilegal)
- ğŸª“ Actividades intensivas de **aprovechamiento forestal** comercial y domÃ©stico
- ğŸ—ºï¸ Debido al carÃ¡cter **altamente diverso** del paÃ­s, cada regiÃ³n presenta condiciones biofÃ­sicas diferentes
- ğŸ¯ El estudio a **escala subnacional** es clave para diagnÃ³sticos precisos y acciones focalizadas
:::

---

## ğŸ›°ï¸ Herramientas TecnolÃ³gicas {background-color="#1E4D2B"}

::: {style="font-size: 1.05em; line-height: 1.5;"}
- **ImÃ¡genes satelitales** + **SIG**: insumos fundamentales para mapeo y anÃ¡lisis espacial
- **Sentinel-2**: sensor crÃ­tico para delimitar Ã¡reas forestales de forma reproducible
- **Machine Learning**: identificaciÃ³n de coberturas, modelaciÃ³n de distribuciÃ³n de especies
- **AWS (S3, EC2, EMR)**: infraestructura cloud para procesamiento distribuido
:::

::: {.fragment}
::: {.callout-tip icon=true style="font-size: 0.95em; margin-top: 1em;"}
## Ventaja Competitiva
Pipeline **completamente reproducible** y **escalable**
:::
:::

---

## ğŸ¯ Pregunta de InvestigaciÃ³n {background-color="#234A23"}

::: {style="font-size: 1.4em; font-weight: 700; text-align: center; padding: 1.5em; background: rgba(255,255,255,0.1); border-radius: 15px; line-height: 1.4;"}
Â¿CÃ³mo identificar automÃ¡ticamente coberturas boscosas usando imÃ¡genes satelitales multiespectrales, mediante arquitecturas de big data y aprendizaje automÃ¡tico?
:::

---

## ğŸ“Š Objetivo General {background-color="#2C5F2D"}

::: {style="font-size: 1.25em; text-align: center; padding: 2em; background: rgba(255,255,255,0.1); border-radius: 15px; line-height: 1.5;"}
Desarrollar una infraestructura de big data para detectar bosque a partir de imÃ¡genes satelitales, empleando procesamiento distribuido y aprendizaje automÃ¡tico
:::

---

## ğŸ¯ Objetivos EspecÃ­ficos {background-color="#1E4D2B"}

::: {style="font-size: 1.1em; line-height: 1.6;"}
1. **Implementar un pipeline de ingesta eficiente** de datos satelitales multiespectrales en zonas rurales

2. **Generar un conjunto de grandes volÃºmenes de datos** limpios de artefactos con caracterÃ­sticas relevantes

3. **DiseÃ±ar modelos de aprendizaje automÃ¡tico** capaces de detectar bosque / no-bosque

4. **Optimizar el entrenamiento y validaciÃ³n** de los modelos para grandes volÃºmenes de datos
:::

---

## ğŸ“¦ Dataset y CaracterÃ­sticas {background-color="#234A23"}

::: {.columns}
::: {.column width="60%"}
### ğŸ›°ï¸ Fuente: Sentinel-2
::: {style="font-size: 1em;"}
- **Bandas**: B02-B08, B8A, B11, B12 (10 bandas)
- **Ãndices**: Calculados NDVI, NDWI, NDMI
- **ResoluciÃ³n**: 20 metros
:::
:::

::: {.column width="40%"}
### ğŸ“Š Shapes de fincas
::: {style="font-size: 1em;"}
- **distribuidas** en todo el paÃ­s
- **Cantidad**: 20 fincas
:::
:::

---

## ğŸ”„ Pipeline Completo de Procesamiento {background-color="#2C5F2D"}

::: {style="font-size: 0.95em;"}
**Paso 0: Ingesta de Datos**
- Carga de shapefiles a S3 (perÃ­metros y cobertura boscosa)
- Descarga de imÃ¡genes Sentinel-2 histÃ³ricas (productos .SAFE)

**Paso 1: Procesamiento Sentinel-2** (`01_procesar_sentinel_clip.py`)
- ExtracciÃ³n de 10 bandas espectrales, remuestreo (10m), reproyecciÃ³n (EPSG:4326), recorte al perÃ­metro

**Paso 2: TabulaciÃ³n de Features** (`03_tabular_features.py`)
- ExtracciÃ³n pixel-a-pixel, composiciÃ³n temporal (mediana, p25, p75), conteo de observaciones

**Paso 3: RasterizaciÃ³n de Labels** (`04_rasterizar_labels.py`)
- ReproyecciÃ³n de shapefiles, rasterizaciÃ³n de bosque, erosiÃ³n morfolÃ³gica de bordes

**Paso 4: UniÃ³n Features + Labels** (`05_unir_features_labels.py`)
- Combina features espectrales con labels, filtrado de pÃ­xeles vÃ¡lidos

**Paso 5: ConsolidaciÃ³n Multi-Zona** (`process_all_zones_pipeline.py`)
- Descubrimiento automÃ¡tico, validaciÃ³n, concatenaciÃ³n, generaciÃ³n de reporte
:::

---

## ğŸ“Š EstadÃ­sticas y Calidad del Dataset {background-color="#1E4D2B"}

::: {.columns}
::: {.column width="50%"}
### ğŸ“ˆ DistribuciÃ³n
::: {style="font-size: 1em;"}
- **Total**: 8,008 pÃ­xeles
- **Bosque (1)**: 1,820 (22.7%)
- **No-Bosque (0)**: 6,188 (77.3%)
- **Features**: 15 variables espectrales
- **Formato**: Parquet (eficiente)
:::

### âœ… Fortalezas
::: {style="font-size: 0.95em;"}
- Cantidad suficiente para ML
- Diversidad geogrÃ¡fica (4 departamentos)
- Labels validados con shapefiles
- ErosiÃ³n de bordes aplicada
:::
:::

::: {.column width="50%"}
### âš ï¸ Consideraciones
::: {style="font-size: 1em;"}
- **Desbalance moderado** (3.4:1)
  - Requiere balanceo en entrenamiento
  - `class_weight='balanced'` implementado

- **Zona 79 problemÃ¡tica** (749:1)
  - Casi sin bosque
  - Considerar exclusiÃ³n

- **Variabilidad temporal limitada**
  - Composite anual
  - No series temporales completas
:::
:::
:::


---

## â˜ï¸ Infraestructura AWS {background-color="#2C5F2D"}

![](mermaid.png){width=90% fig-align="center"}

---

## ğŸ¤– Entrenamiento del Modelo {background-color="#1E4D2B"}

::: {style="font-size: 1.05em;"}
**Algoritmo**: Random Forest Classifier

::: {.columns}
::: {.column width="50%"}
**ConfiguraciÃ³n**
```python
RandomForestClassifier(
  n_estimators=100,
  max_depth=10,
  min_samples_split=10,
  min_samples_leaf=5,
  class_weight='balanced',
  random_state=42
)
```
:::

::: {.column width="50%"}
**DivisiÃ³n de Datos**
- **Train**: 70% (5,608 muestras)
- **Validation**: 15% (1,198)
- **Test**: 15% (1,202)

**DistribuciÃ³n de Clases**
- No-Bosque: 77.3%
- Bosque: 22.7%
:::
:::
:::

---

## ğŸ“Š Resultados Principales {background-color="#234A23"}

::: {style="text-align: center;"}

### ğŸ¯ MÃ©tricas en Test Set

| MÃ©trica | Valor | InterpretaciÃ³n |
|:--------|------:|:---------------|
| **Accuracy** | **90.35%** | Tasa de acierto general |
| **Precision** | 72.89% | 73 de cada 100 predicciones correctas |
| **Recall** | **91.58%** | Detecta 9 de cada 10 Ã¡reas boscosas |
| **F1-Score** | 81.17% | Balance precision-recall |
| **ROC AUC** | **96.16%** | Excelente discriminaciÃ³n |
| **PR AUC** | **85.42%** | Muy bueno para clases desbalanceadas |

:::

---

## ğŸ¯ Matriz de ConfusiÃ³n {background-color="#2C5F2D"}

::: {.columns}
::: {.column width="60%"}
::: {style="font-size: 1.2em;"}

|                | Pred: No-Bosque | Pred: Bosque |
|---------------:|----------------:|-------------:|
| **Real: No-Bosque** | **836** âœ… | 93 âŒ |
| **Real: Bosque** | 23 âŒ | **250** âœ… |

:::

### InterpretaciÃ³n
::: {style="font-size: 1em;"}
- **TN**: 836 (90.0%) - Correctos no-bosque
- **FP**: 93 (10.0%) - Falsos positivos
- **FN**: 23 (8.4%) - Bosque no detectado
- **TP**: 250 (91.6%) - Correctos bosque
:::
:::

::: {.column width="40%"}
::: {.callout-important icon=true style="font-size: 1em;"}
## Tasa de Error
**Falsos Negativos**: 8.42%

El modelo pierde algunas Ã¡reas de bosque, pero la tasa es aceptable.
:::
:::
:::

---

## ğŸ“Š AnÃ¡lisis de Features {background-color="#1E4D2B"}

::: {.columns}
::: {.column width="50%"}
### ğŸ” Top 5 Features
::: {style="font-size: 0.95em;"}

| Rank | Feature | Importancia |
|:----:|:--------|:------------|
| ğŸ¥‡ | `B03_med` (Verde) | **18.90%** |
| ğŸ¥ˆ | `NDVI_range` | **11.67%** |
| ğŸ¥‰ | `B11_med` (SWIR) | **9.99%** |
| 4 | `B05_med` (Red Edge) | 9.31% |
| 5 | `n_obs` | 8.94% |

:::

**Total bandas espectrales**: 61.86%
:::

::: {.column width="50%"}
### ğŸ“ˆ Insights
::: {style="font-size: 0.95em;"}
**Bandas Espectrales Clave**
- Verde (B03): Reflectancia vegetaciÃ³n
- SWIR (B11, B12): Contenido humedad
- Red Edge (B05): Estado vegetaciÃ³n

**Variabilidad Temporal**
- NDVI_range: Cambios estacionales
- n_obs: Calidad temporal
- Percentiles: Extremos condiciones

La **dinÃ¡mica temporal** es crucial para discriminaciÃ³n
:::
:::
:::

---

## âœ… Fortalezas y âš ï¸ Ãreas de Mejora {background-color="#234A23"}

::: {.columns}
::: {.column width="50%"}
### âœ… Fortalezas
::: {style="font-size: 1em;"}
1. **Alto Recall (91.58%)**
   - Detecta mayorÃ­a de bosques
   - Bajo riesgo de pÃ©rdida

2. **Excelente ROC AUC (96.16%)**
   - Muy buena discriminaciÃ³n

3. **Features Interpretables**
   - Bandas espectrales conocidas
   - NDVI validado cientÃ­ficamente
:::
:::

::: {.column width="50%"}
### âš ï¸ Ãreas de Mejora
::: {style="font-size: 1em;"}
**1. Precision (72.89%)**
- ~27% falsos positivos
- Soluciones: mÃ¡s datos, ajuste umbrales, features adicionales

**2. Desbalance de Clases**
- Estrategia: `class_weight='balanced'`
- Alternativas: SMOTE, undersampling

**3. ValidaciÃ³n GeogrÃ¡fica**
- Split por zonas (no aleatorio)
- Evaluar generalizaciÃ³n espacial
:::
:::
:::

---

## ğŸš€ Recomendaciones TÃ©cnicas {background-color="#2C5F2D"}

::: {style="font-size: 1.05em; line-height: 1.5;"}

1. **Re-entrenamiento PeriÃ³dico**
   - Actualizar modelo cada 3-6 meses con nuevos datos de zonas

2. **Monitoreo de Performance**
   - Tracking continuo en producciÃ³n para detectar drift en datos

3. **Deployment en Pipeline**
   - Integrar en sistema automatizado con API para predicciones en tiempo real

4. **ValidaciÃ³n en Campo**
   - Verificar predicciones in-situ en zonas no incluidas en entrenamiento

5. **Features Adicionales**
   - Ãndices: EVI, SAVI, NDMI
   - Texturas: GLCM
   - Variables climÃ¡ticas

6. **Ensemble de Modelos**
   - Combinar RF + GBT con voting classifier
:::

---

## ğŸ“ Conclusiones {background-color="#1E4D2B"}

::: {style="font-size: 1.15em; line-height: 1.6;"}

âœ… **Pipeline completo y funcional** implementado exitosamente

âœ… **Modelo con 90.35% de accuracy** en detecciÃ³n de cobertura forestal

âœ… **Infraestructura escalable** en AWS (S3, EC2, EMR)

âœ… **Flujo reproducible** con scripts documentados

âœ… **Features interpretables** basadas en evidencia cientÃ­fica

âœ… **Dataset de calidad** con 8,008 muestras validadas

:::

---

## ğŸŒŸ Impacto y Aplicaciones {background-color="#234A23"}

::: {.columns}
::: {.column width="50%"}
### ğŸŒ Aplicaciones Ambientales
::: {style="font-size: 1.05em;"}
- Monitoreo de deforestaciÃ³n
- ConservaciÃ³n de biodiversidad
- Cumplimiento normativo
- Reportes de carbono
- GestiÃ³n de riesgos ambientales
:::
:::

::: {.column width="50%"}
### ğŸ’¼ Valor Comercial
::: {style="font-size: 1.05em;"}
- Due diligence ambiental
- CertificaciÃ³n forestal
- EvaluaciÃ³n de riesgos
- PlanificaciÃ³n territorial
- Toma de decisiones informada
:::
:::
:::

---

## ğŸ“š Referencias y DocumentaciÃ³n {background-color="#2C5F2D"}

::: {style="font-size: 1.1em;"}

### ğŸ“– DocumentaciÃ³n del Proyecto
- `README.md` - GuÃ­a general y resultados principales
- `DATA_PREP.md` - PreparaciÃ³n detallada de datos
- `RESULTADOS_ENTRENAMIENTO.md` - AnÃ¡lisis completo de mÃ©tricas
- `EMR_TRAINING.md` - Entrenamiento distribuido en Spark
- `config/*.yaml` - ConfiguraciÃ³n de parÃ¡metros

### ğŸ”— Recursos Externos
- [Sentinel-2 Documentation](https://sentinel.esa.int/web/sentinel/missions/sentinel-2)
- [AWS EMR Spark](https://aws.amazon.com/emr/)
- [Scikit-learn Random Forest](https://scikit-learn.org/stable/)

### ğŸ—‚ï¸ Repositorio
- GitHub: `github.com/maraosoc/mineria_project`

:::

---

## ğŸ™ Â¡Gracias! {background-color="#1E4D2B"}

::: {style="text-align: center; font-size: 1.8em; margin-top: 2em;"}

### Preguntas y DiscusiÃ³n

:::

::: {style="text-align: center; font-size: 1.2em; margin-top: 2em;"}

**Equipo de MinerÃ­a de Datos**

ğŸ“Š Proyecto: DetecciÃ³n de DeforestaciÃ³n con ML

ğŸ›°ï¸ TecnologÃ­as: Sentinel-2 Â· AWS Â· Spark Â· Python

:::
